[pytest]
log_format = [%(asctime)s.%(msecs)03d %(levelname)s] %(message)s
log_cli_format = [%(asctime)s.%(msecs)03d %(levelname)s] %(message)s
log_date_format = %Y-%m-%d %H:%M:%S
log_file_level=DEBUG
log_cli = true
asyncio_mode=auto
addopts = -ra --emoji
markers =
# Slow tests that take some time to complete but are run both as part of the
# regression-test *and* ci *and* release workflows.
  slow: marks tests as slow (deselect with '-m "not slow"')
# Tests that should only run on release builds and take significant amount of time to run.
# For example stress tests found in replication.
# `opt_only` runs only on regression-test and release workflow (skipped for ci)
  opt_only: marks tests that are only reasonable to run against an opt-built Dragonfly
# Usually tests that are known to fail for iouring and we skip them on epoll workflows
  exclude_epoll: marks tests that should not run on epoll socket
# Tests that should only run in debug mode because release builds are fast enough
# for their assertions to hold. They never run on release build.
  debug_only: mark tests that should run only in debug mode
filterwarnings =
    ignore::DeprecationWarning
